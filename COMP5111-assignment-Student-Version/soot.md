# Test Coverage Report Generation with Soot

## **Introduction**

In this project, we will use the tool Soot to instrument our subject program and generate the statement coverage report. 
Soot is a widely-used Java optimization framework. 
Soot can be used as a standalone tool to optimize or inspect class files, as well as a framework to develop optimizations or transformations on Java bytecode. 
For more detailed introduction to Soot, you can refer to the website <https://soot-oss.github.io/soot/>.


In this project, you are required to instrument our subject programs, and your generated test cases. 
Then, after executing the instrumented programs, the statement coverage report will be generated based on the execution. 
To evaluate the project, you can compare your generated test coverage reports with those generated by the existing tool EclEmma.


## **Steps**

You need to follow these steps to use Soot to generate test coverage report. 

 

### **1. Set JAVA_HOME**

Before running soot, please make sure that environment variable JAVA_HOME is correctly set on your computer (especially MacOS users).

You may check by the following command:

Linux and MacOS (bash):

`echo $JAVA_HOME`

Windows:

`echo %JAVA_HOME%`

If the command shows nothing, please set your JAVA_HOME variable to your path to your installed jdk/Contents/Home/

If JAVA_HOME is not properly configured, soot may throw an exception that asks you to add “rt.jar” to your soot-classpath.

### **2. Download Soot**

Please download Soot from [here](https://repo1.maven.org/maven2/org/soot-oss/soot/4.2.1/soot-4.2.1-jar-with-dependencies.jar).

You are also recommended to use the version included in our example soot project that is available in our Soot workshop.

### **3. Read the Soot documentations on how to instrument java programs using soot**

You can check the following tutorials on how to instrument java programs using Soot. The source code is also provided in the tutorials. 

- <https://github.com/soot-oss/soot/wiki/Adding-profiling-instructions-to-applications>

### **4. Implement your own tool**

To generate the test coverage reports, you need to conduct the following steps:

1. Analyze and instrument the Java programs. In this step, you should consider which part of the programs you are 
going to instrument, and what kind of information you are going to put in the program instrumentation.  

2. Analyze the execution log and generate the test coverage report. After instrumentation, you need to run the test 
cases, and the execution log will be generated then. Then, based on the execution log, you can compute the test 
   coverage.

### **5. Cross validation**

You can compare the test coverage report generated by your tool and the report genreated by EclEmma for cross validation.

If you encounter some problems when using Soot, you may check our [FAQ](Assignment1_FAQ.md) site and see if there are already 
answers.

 